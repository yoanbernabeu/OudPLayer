<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Ambient Oud Player - Oud music for your deep work sessions. Generated by AI.</title>
    <meta name="description" content="Oud music for your deep work sessions. Generated by AI.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Facebook Meta Tags and Twitter Meta Tags omitted for brevity -->

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <!-- Include Howler.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js" integrity="sha512-xi/RZRIF/S0hJ+yJJYuZ5yk6/8pCiRlEXZzoguSMl+vk2i3m6UjUO/WcZ11blRL/O+rnj94JRGwt/CHbc9+6EA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
        /* CSS styles for a minimalist full-screen interface */
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
            color: #ffffff;
            background: #1a1a1a;
        }

        .container {
            position: relative;
            width: 100%;
            height: 100%;
        }

        /* Titles and phrases at the bottom */
        .title, .phrase {
            position: absolute;
            width: 100%;
            text-align: center;
            margin: 0;
            font-size: 12px; /* Réduit la taille de la police */
            padding: 0; /* Supprime les marges internes */
        }

        .title {
            bottom: 40px; /* Remonte un peu le titre */
            font-weight: bold;
        }

        .phrase {
            font-size: 10px;
            bottom: 20px; /* Ajuste un peu plus bas la phrase */
        }

        /* Player Controls */
        .control-bar {
            position: absolute;
            bottom: 80px;
            width: 100%;
            text-align: center;
            z-index: 2;
            display: flex;
            justify-content: center;
            gap: 15px; /* Adjust gap for better spacing */
        }

        .button {
            background: rgba(255, 255, 255, 0.1); /* More transparent */
            color: #ffffff;
            border: 1px solid rgba(255, 255, 255, 0.3); /* Add a subtle border */
            padding: 10px 15px; /* Adjust padding */
            border-radius: 50px; /* More circular */
            font-size: 12px; /* Smaller text */
            cursor: pointer;
            transition: background 0.3s, color 0.3s;
        }

        .button:hover {
            background: rgba(255, 255, 255, 0.2); /* Slightly change hover */
        }

        .button:focus {
            outline: none; /* Remove outline on focus */
        }

        /* Progress Bar Styles */
        .progress-bar {
            position: absolute;
            bottom: 140px;
            width: 100%;
            height: 10px;
            background: #444;
            border-radius: 5px;
            overflow: hidden;
            z-index: 2;
        }

        .progress {
            width: 0;
            height: 100%;
            background: #ff9100;
            transition: width 0.1s;
        }

        /* Subtle oriental animation */
        .oriental-animation {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, #2c3e50, #1a1a1a);
            overflow: hidden;
        }

        .pattern {
            position: absolute;
            top: 0;
            left: 0;
            width: 200%;
            height: 200%;
            background-image: url('anim.svg');
            background-size: 30%; /* Réduisez la taille pour une mosaïque plus dense */
            background-repeat: repeat;
            opacity: 0.2;
            animation: drift 120s linear infinite;
        }
        
        @keyframes drift {
            0% {
                transform: translate(0, 0) scale(1.05); /* Départ */
            }
            20% {
                transform: translate(10%, 10%) scale(1); /* Changement léger */
            }
            40% {
                transform: translate(-10%, 20%) scale(1.05); /* Changement notable */
            }
            60% {
                transform: translate(15%, -15%) scale(1.05); /* Changement supplémentaire */
            }
            80% {
                transform: translate(25%, 25%) scale(1); /* Approche de la fin */
            }
            100% {
                transform: translate(0, 0) scale(1.05); /* Retour à la position initiale */
            }
        }

        /* Styles for the welcome screen */
        .welcome-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, #2c3e50, #1a1a1a);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #ffffff;
            text-align: center;
            padding: 0 20px;
            box-sizing: border-box;
        }

        .welcome-title {
            font-size: 28px;
            margin-bottom: 20px;
            line-height: 1.4;
            max-width: 100%;
            word-wrap: break-word;
        }

        .start-button {
            background: #ffffff;
            color: #2c3e50;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 30px;
            cursor: pointer;
            transition: background 0.3s, color 0.3s;
        }

        .start-button:hover {
            background: rgba(255, 255, 255, 0.8);
        }

        /* Footer styles */
        .footer {
            position: absolute;
            bottom: 5px; /* Réduit l'espace en bas */
            width: 100%;
            text-align: center;
            font-size: 8px; /* Réduit la taille de police */
            color: #ffffff;
            z-index: 2;
        }

        .footer a {
            color: #ffffff;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* Responsive adjustments */
        @media (max-width: 600px) {
            .welcome-title {
                font-size: 24px;
                padding: 0 15px;
            }
            .start-button {
                font-size: 16px;
                padding: 12px 24px;
            }
        }

        @media (max-width: 400px) {
            .welcome-title {
                font-size: 20px;
                padding: 0 10px;
            }
            .start-button {
                font-size: 14px;
                padding: 10px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Welcome Screen -->
    <div id="welcomeScreen" class="welcome-screen">
        <h1 class="welcome-title">Immerse yourself in the tranquil melodies of the oud</h1>
        <button id="startButton" class="start-button">Begin your journey</button>
    </div>

    <!-- Main Content -->
    <div id="mainContent" class="container" style="display: none;">
        <div class="oriental-animation">
            <div class="pattern"></div>
        </div>
        <!-- Progress Bar -->
        <div class="progress-bar">
            <div id="progress" class="progress"></div>
        </div>
        <!-- Control Bar -->
        <div class="control-bar">
            <button id="prevButton" class="button">
                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m15 19l-7-7l7-7"/></svg>
            </button>
            <button id="playPauseButton" class="button">Pause</button>
            <button id="nextButton" class="button">
                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m9 5l7 7l-7 7"/></svg>
            </button>
        </div>
        <!-- Titles overlaid at the bottom -->
        <h1 class="title">Ambient Oud Player</h1>
        <h2 class="phrase">Oud music for your deep work sessions. Generated by AI.</h2>
        <!-- Footer -->
        <div class="footer">
            Made with love by <a href="https://yoandev.co" target="_blank">YoanDev</a>
        </div>
    </div>

    <script>
        // JavaScript code for audio player
        let playlist = [];
        let currentTrackIndex = 0;
        let currentSound;
        let isPlaying = true;
        const crossfadeDuration = 2000; // Crossfade duration in milliseconds

        // DOM Elements
        const welcomeScreen = document.getElementById('welcomeScreen');
        const startButton = document.getElementById('startButton');
        const mainContent = document.getElementById('mainContent');
        const playPauseButton = document.getElementById('playPauseButton');
        const nextButton = document.getElementById('nextButton');
        const prevButton = document.getElementById('prevButton');
        const progress = document.getElementById('progress');

        // Define the SVGs
        const playSVG = '<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M8.6 5.2A1 1 0 0 0 7 6v12a1 1 0 0 0 1.6.8l8-6a1 1 0 0 0 0-1.6z" clip-rule="evenodd"/></svg>';
        const pauseSVG = '<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M8 5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zM15 5a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2z" clip-rule="evenodd"/></svg>';

        // Start button event listener
        startButton.addEventListener('click', () => {
            welcomeScreen.style.display = 'none';
            mainContent.style.display = 'block';
            initPlayer();
        });

        // Initialize player
        function initPlayer() {
            fetch('playlist.json')
                .then(response => response.json())
                .then(data => {
                    playlist = data;
                    currentTrackIndex = Math.floor(Math.random() * playlist.length);
                    loadTrack(currentTrackIndex);
                })
                .catch(error => console.error('Error loading playlist:', error));
        }

        // Load a track with optional crossfading
        function loadTrack(index, isCrossfade = false) {
            const track = playlist[index];
            const newSound = new Howl({
                src: [track.url],
                html5: true,
                volume: isCrossfade ? 0 : 1,
                onplay: () => {
                    if (isCrossfade) {
                        newSound.fade(0, 1, crossfadeDuration);
                    }
                    requestAnimationFrame(updateProgress); // Start updating the progress bar
                },
                onend: () => nextTrack(),
                onloaderror: () => {
                    console.error('Error loading track.');
                    nextTrack();
                },
                onplayerror: () => {
                    console.error('Error playing track.');
                    newSound.once('unlock', () => newSound.play());
                }
            });

            if (isCrossfade && currentSound) {
                currentSound.fade(currentSound.volume(), 0, crossfadeDuration);
                newSound.play();
                setTimeout(() => {
                    currentSound.stop();
                    currentSound = newSound;
                }, crossfadeDuration);
            } else {
                if (currentSound) currentSound.stop();
                newSound.play();
                currentSound = newSound;
            }
        }

        // Move to the next track with crossfading
        function nextTrack() {
            currentTrackIndex = (currentTrackIndex + 1) % playlist.length;
            loadTrack(currentTrackIndex, true);
        }

        // Move to the previous track with crossfading
        function prevTrack() {
            currentTrackIndex = (currentTrackIndex - 1 + playlist.length) % playlist.length;
            loadTrack(currentTrackIndex, true);
        }

        // Initial setup with SVG icons
    playPauseButton.innerHTML = isPlaying ? pauseSVG : playSVG;

    // Play/Pause functionality with SVG icons
    playPauseButton.addEventListener('click', () => {
        if (isPlaying) {
            currentSound.pause();
            isPlaying = false;
            playPauseButton.innerHTML = playSVG;
        } else {
            currentSound.play();
            isPlaying = true;
            playPauseButton.innerHTML = pauseSVG;
        }
    });

        // Next Button Event Listener
        nextButton.addEventListener('click', () => {
            nextTrack();
        });

        // Previous Button Event Listener
        prevButton.addEventListener('click', () => {
            prevTrack();
        });

        // Update Progress Bar
        function updateProgress() {
            if (currentSound) {
                const progressWidth = (currentSound.seek() / currentSound.duration()) * 100;
                progress.style.width = progressWidth + '%';
                requestAnimationFrame(updateProgress);
            }
        }
    </script>
</body>
</html>